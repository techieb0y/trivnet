Trivnet 2.7 by KD8GBL (Peter Corbett, peter@corbettdigital.net)

This is the 145.67 / MN Packet Network's re-written version of KB8ZQZ's
TrivnetDB. The original was in perl; this version is in PHP and uses a
somewhat more dynamic database design and provides some extra features.

Setup instructions:

* Required Packages (for Debian Squeeze/6.0; names for other distros may vary)
	httpd
	postgresql96-server
	postgresql96-contrib
	php
	php-cli
	php-pgsql

Base install:
-----------------------------------

The RPM will handle:

* Creation of the 'trivnet' databse, owned by a PostgreSQL user of 'trivnet',
  with a random password.
* Addition of a line to pg_hba.conf:
	host   trivnet         trivnet         127.0.0.1/32            md5
* Addition of the tablefunc extensions to the DB
* Population of the FCC database
* Setup of the batch-processer cron job.

Log into the system
-----------------------------------
When you browse to the trivnet site, you'll be prompted to log in. Use an FCC-issued callsign, or the word 'guest'.


Set up the dataase fields
-----------------------------------
On the admin page, under the Datatypes tab, you can add fields to the system. There aren't any datatypes defined by default, just the database key (personID). This Data Types tab is where you add more. Each data type (field name) has a short name and a long name -- the short name should be one word, preferably all lower case; this is used for the packet side of things.  The web interface uses the long name ('label') everywhere. Exact Match is for things like marathon bib numbers; without it, searches will also return a partial/substring match.

If you have a field like a bib number that's a guarenteed-present, guarenteed-unique value, you can take the ID number and put it in the "$config["multidefault"]" line in .../includes/config.inc. This is used for the multi-edit mode, and as a default for batch edit. You'll see a key icon on that line in the Data Types tab when that's set.


Populating the dataase (marathon runners or similar roster)
-----------------------------------
In typical applications, a CSV file is imported using the Bulk Import section (again under Admin on the top-level menu). You can upload a file here, or you can pick a file that's been copied manually to the .../csvdata/ folder on the server. Either way, it'll guess if it's comma-separated or tab-separted, and move onto to matching input columns with the data types you set up above. You'll be shown the first few lines of the file, and a drop-down menu for each column it extracted from the data file.  Once you've got things matched up, click Import. That sets up an import job -- you should have a Bulk Data Import job visible under the 'Async Jobs' tab on the admin screen. These are processed by the async.php script via the crontab entry set above.

On the Async Jobs page, the 'filename' link returns the input file; clicking the link under Job State provides an error log for that job.
